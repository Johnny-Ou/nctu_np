# Network Programming Project 3 Remote Batch System

## I. Introduction
Here, you are asked to write a Remote Batch System, which consists of a simple HTTP server called http server and a CGI program console.cgi. 
We will use Boost.Asio library to accomplish this project.

## II. The structure of the working directory
```
  working_dir
  ├─ http_server
  ├─ console.cgi
  ├─ panel.cgi
  └─ test_case/
```
## III. Specification
### A. http server
1. In this project, the URI of HTTP requests will always be in the form of /${cgi name}.cgi<br>
   (e.g., /panel.cgi, /console.cgi, /printenv.cgi), and we will only test for the HTTP GET method.<br>
2. Your http server should parse the HTTP headers and follow the CGI procedure (fork, set environment variables, dup, exec) to execute the specified CGI program.<br>
3. The following environment variables are required to set:<br>
  (a) REQUEST METHOD<br>
  (b) REQUEST URI<br> 
  (c) QUERY STRING<br> 
  (d) SERVER PROTOCOL<br>
  (e) HTTP HOST<br>
  (f) SERVER ADDR<br>
  (g) SERVER PORT<br>
  (h) REMOTE ADDR<br>
  (i) REMOTE PORT<br>
### B. console.cgi

1. You are highly recommended to inspect and run the CGI samples before you start this section. 
   For details about CGI (Common Gateway Interface), please refer to the course slides as well as the given CGI examples.
2. The console.cgi should parse the connection information (e.g. host, port, file) from the environment variable QUERY STRING, 
   which is set by your HTTP server (see section 2.1).<br>
   For example, if QUERY STRING is:<br>
   ```
         h0=nplinux1.cs.nctu.edu.tw&p0=1234&f0=t1.txt&h1=nplinux2.cs.nctu.edu.tw&
         p1=5678&f1=t2.txt&h2=&p2=&f2=&h3=&p3=&f3=&h4=&p4=&f4=
   ```
   It should be understood as:<br>
   ```
         h0=nplinux1.cs.nctu.edu.tw    # the hostname of the 1st server
         p0=1234                       # the port of the 1st server
         f0=t1.txt                     # the file to open
         h1=nplinux2.cs.nctu.edu.tw    # the hostname of the 2nd server
         p1=5678                       # the port of the 2nd server
         f1=t2.txt                     # the file to open
         h2=                           # no 3rd server, so this field is empty
         p2=                           # no 3rd server, so this field is empty
         f2=                           # no 3rd server, so this field is empty
         h3=                           # no 4th server, so this field is empty
         p3=                           # no 4th server, so this field is empty
         f3=                           # no 4th server, so this field is empty
         h4=                           # no 5th server, so this field is empty
         p4=                           # no 5th server, so this field is empty
         f4=                           # no 5th server, so this field is empty
   ```
3. After parsing, console.cgi should connect to these servers. Note that the maximum number of the servers never exceeds 5.

### C. panel.cgi(Provided by TA)
1. This CGI program generates the form in the web page. It detects all files in the directory test case/ and display them in the selection menu.

### D. test case/ (Provided by TA)
1. This directory contains test cases, and each of which lists the commands to run remotely. 
   You can put new test cases into this directory, and select it in the form generated by panel.cgi.

### E. np single golden (Provided by TA)
1. This executable file is a Remote Working Ground Server in project2. We will use it for demo. You do NOT need to use your code for this server.

### F. The Execution Flow
1. Run your http server by ./http server [port]<br>
2. Open a browser and visit http://[NP_server_host]:[port]/panel.cgi<br>
3. Fill the form with the servers to connect to and select the input file, then click Run.<br>
4. The web page will automatically redirected to http://[NP_server_host]:[port]/console.cgi and your console.cgi should start now.<br>
